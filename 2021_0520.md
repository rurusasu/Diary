---
marp: true
theme: template
---

# 1. Blender で CAD る 2

## 1. 1. Blender 上の Python に pip をインストール

[Blender2.8: Python モジュールの追加](https://demura.net/misc/18383.html) を参考にした．

まず，インストールされた Blender 2.92 のディレクトリから，

```
$ cd ./Brender/2.92/python/bin
```

で python の `bin` ディレクトリまで移動する．このとき，`bin` ディレクトリ内に `python○.○m` ファイルが存在するか確認する．以下では， `python3.7m` が存在したと仮定して説明する．もし，`python ○.○m`の数字が異なる場合は，そちらに合わせて適宜読み替えて実行する．次に，

```
$ curl https://bootstrap.pypa.io/get-pip.py -o get-pip.py
```

で `get-pip.py` ファイルをダウンロードする．そして，

```
$ ./python3.7m ./get-pip.py
```

で `pip` モジュールをインストールする．これで Blender 上の python にて pip コマンドが使用可能になった．

---

## 1.2. 読み取り専用のファイルシステムです

もし，Blender を Ubuntu Software からインストールしている場合，ディレクトリへの書き込みが制限されているため，`curl` コマンドで `get-pip.py` を `bin` ディレクトリ上にダウンロードすることができない．一般的には `chmod` コマンドで bin ディレクトリへの書き込み権限を付与できる ([Linux の権限確認と変更(chmod)（超初心者向け）](https://qiita.com/shisama/items/5f4c4fa768642aad9e06)参考) が，`root` ユーザで行っても権限を付与できなかったため，[Blender](https://www.blender.org/download/) から直接 `.xz` ファイルをダウンロードし，再インストールした．

## 1.3. Permission denied

Ubuntu Software からインストールした Blender は `/snap/blender` まで指定することで，VSCode から Blender 内の python にアクセスすることができていた．しかし，`.xz`ファイルを解凍することでインストールした Blender は `/home/miki/blender/blender` でアプリケーションの実行ファイルまで指定しないと，アクセスすることができなかった．

---

## 1.4. `.xz` ファイルからインストールした `Blender` で外部スクリプト実行

[Blender2.8でpythonスクリプトをPowerShellで利用する](https://bluebirdofoz.hatenablog.com/entry/2019/09/03/090414) によると，
> 外部から python スクリプトを読み込んで Blender で実行するには[Pythonスクリプトの自動実行]を有効にする必要があります。

1. プリファレンスの自動保存が有効になっていることを確認する．

<div align="center">
<img src="https://raw.githubusercontent.com/rurusasu/Diary/master/%E7%94%BB%E5%83%8F/2021_0531/%E8%87%AA%E5%8B%95%E4%BF%9D%E5%AD%98.png" width=500>
</div>

---

2. **`python` スクリプトの自動実行** にチェックを入れる．

<div align="center">
<img src="https://raw.githubusercontent.com/rurusasu/Diary/master/%E7%94%BB%E5%83%8F/2021_0531/%E8%87%AA%E5%8B%95%E4%BF%9D%E5%AD%98.png" width=500>
</div>