---
marp: true
theme: template
---

# 物体の回転

## 1.1. オイラー角

欠点
1. 特異点がある．
1. 姿勢の時間的変化を積分する際に単位四元数よりも精度が低いこと


## 1.2. 四元数

欠点
1. 四元数が直感的な物理的意味を持たないこと
1. 四元数が純粋な回転であるためにはユニティノルムを持たなければならないこと

---

## 1.3. 座標系

![bg right 70%](https://raw.githubusercontent.com/rurusasu/Diary/master/%E7%94%BB%E5%83%8F/2021_0517/fig1.png)

2つの異なる座標系で表現されたデータの関係を考えます。
* ワールド座標系は、慣性空間に固定されています。
* この座標系の原点を $x_w$ とする。体固定座標系は、姿勢を表現したい物体に固く固定されています。この座標系の原点を $x_b$ とする。

体内固定座標で表現された点やベクトルは，世界座標で表現されたものとは素数記号で区別される。 例えば，$x$ が世界座標上の点であるならば，$x′$ は体部固定座標上で表現された同じ点である。言うまでもなく，$x_w$ と $x′_b$ はともにゼロであるが，$x′_w$ と $x_b$は一般的にはゼロではない。ここで，$x′_w$ は体側固定座標で表された世界座標の原点であり，$x_b$ は世界座標で表された体内固定座標の原点である。

---

### 1.3.1. 並進移動で表される体内座標系における体内座標系上の点 P

![bg right 50%](https://raw.githubusercontent.com/rurusasu/Diary/master/%E7%94%BB%E5%83%8F/2021_0517/fig2.png)
![bg right 50%](https://raw.githubusercontent.com/rurusasu/Diary/master/%E7%94%BB%E5%83%8F/2021_0517/fig3.png)

点 $\bm{x}_w$から 点 $P$ への位置ベクトルを $\bm{x}$，とすると，体内座標系 $P$ への位置ベクトルを $\bm{x}'$ は
$$
\bm{x} = \bm{x}_b + \bm{x}'
$$
すなわち
$$
\bm{x}' = \bm{x} - \bm{x}_b
$$

一方，体内座標系から世界座標系原点への位置ベクトルを $\bm{x}_w'$ とすると，

$$
\bm{x} = \bm{x}' - \bm{x}_w'
$$

と表される．

---

# 2. 回転行列

回転行列 $R$ とは，
> ベクトルとの掛け算で，その長さを保ったままベクトルを回転させる行列のこと．

すべての 3x3 回転行列の特別な直交群を $SO(3)$ と呼び，$R \in SO(3)$ の場合は
$$
\det{R} = \pm 1
$$
$$
R^{-1} = R^T
$$

## 2.1. 座標変換

剛体の姿勢を符号化する回転行列 $R$ を
> 世界座標で表されたベクトルに前置乗算すると、体内固定座標で表された同じベクトルが得られる行列

と定義する。すなわち，$\bm{z} \in \mathbb{R}^3$ を世界座標で表されたベクトルとし，$\bm{z}′ \in \mathbb{R}^3$ を身体固定座標で表された同じベクトルとすると，次のような関係が成り立つ。

$$
\bm{z}' = R \bm{z}
$$
$$
\bm{z} = R^T \bm{z}'
$$

---

![bg right 70%](https://raw.githubusercontent.com/rurusasu/Diary/master/%E7%94%BB%E5%83%8F/2021_0517/fig4.png)

位置ベクトル $\bm{x}_b$ に定義されていた体内座標系に回転行列 $R$ をかけることにより移動されたとする．このとき，この座標系の原点は，世界座標系上において $r\bm{x}_b$ で表され，反対に移動した体内座標系の原点から世界座標系の原点の位置は $R \bm{x}_w'$ で表される．

---

移動した体内座標系における点 $p'$ の位置 $\bm{x}'$ は，

$$
\bm{x}' = R
$$