# WSL + docker + GPU

## 1.1 Ubuntu 20.04.1 LTS をインストール

Microsoft Store より、Ubuntu をインストール

![Ubuntu](画像/0909/Ubuntu.png)

## 1.2 Ubuntu 初期設定

ユーザ名とパスワードを設定

パッケージアップデート

```
sudo apt update
sudo apt upgrade
```

# WSL kernel update

## 2.1 WSL kernenl の確認

WLA2 の正しいカーネルで動作しているかを確認

```
uname -r
```

![uname](画像/0909/uname.png)

**4.19.121-microsoft-WSL2-standard**と表示されれば成功らしいが.....

明らかに文字数が少ないので、少し調べてみた。

コマンドプロンプトにて、現在の Ubuntu が動作している WSL のバージョンを確認

```
wsl -l -v
```

![uname-2](画像/0909/uname-2.png)

WSL のバージョンがやはり、1 だった.....

## 2.2 kernel update

このバージョンを 2 に変更する

```
wsl --set-version Ubuntu 2
```

![uname-3](画像/0909/uname-3.png)

カーネルの viersion が古かったのか、その更新を要求された。

また、Ubuntu を起動した状態だと、

![uname-4](画像/0909/uname-4.png)

このように、Ubuntu が強制終了された。

先ほどのサイトから WSL.exe のアップデートファイルをダウンロードすることができた。
![kernel-update](画像/0909/kernel_update-1.png)

しかし、コマンドラインでアップデートを行いたかったので、今回はこちらは使用しなかった。

## コマンドラインでの WSL2 のアップデート

windows のバージョンを確認

![kernel-update2](画像/0909/kernel_update-2.png)

![kernel-update3](画像/0909/kernel_update-3.png)

目的の「version 2004，build 19041 以上」になっていなければ WSL2 は使えないが、現在の windows の version は「version 1909 build 18363」なので、まずこちらのアップデートを行わなければならない。

### Windows 10 のダウンロード

windows の更新プログラムでは「version 2004」にアップデートできなかったので、次のサイトから更新プログラムをダウンロードする。

https://www.microsoft.com/ja-jp/software-download/windows10

![kernel-update4](画像/0909/kernel_update-4.png)
